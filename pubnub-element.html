<link rel="import" href="bower_components/polymer/polymer.html"> 

<!--
Element providing solution to no problem in particular.

##### Example

    <seed-element></seed-element>

@element seed-element
@blurb Element providing solution to no problem in particular.
@status alpha
@homepage http://polymerlabs.github.io/seed-element
-->
<polymer-element name="pubnub-element" attributes="publish_key subscribe_key auth_key uuid cipher_key noleave keepalive secret_key ssl windwoing jsonp">


  <script>

    Polymer('pubnub-element', {
      /**
        * The 'publish_key' attribute sets the publish_key to be used for publishing messages to a channel.
        * REQUIRED
        *
        * @attribute publish_key
        * @type string
        * @default ''
        */
      publish_key: '',

      /**
        * The 'subscribe_key' attribute sets the subscribe_key to be used for subscribing to a channel.
        * REQUIRED
        *
        * @attribute subscribe_key
        * @type string
        * @default ''
        */
      subscribe_key: '',

      /**
        * The 'auth_key' attribute sets the auth_key to be used for determining User-Level Access Manager permissions.
        * OPTIONAL
        *
        * @attribute auth_key 
        * @type string
        * @default ''
        */
      auth_key: '',
      
      /**
        * The 'uuid' attribute sets the unique user id to be used to identify the client. By default a randomly generated uuid is created by the client.
        * OPTIONAL
        *
        * @attribute uuid
        * @type string
        * @default randomly generated
        */
      uuid: '',

      /**
        * The 'cipher_key' attribute sets the cryptographic key to use for message level encryption with AES.
        * OPTIONAL
        *
        * @attribute cipher_key
        * @type string
        * @default ''
        */
      cipher_key: '',

      /**
        * The 'noleave' attribute, when set to true, explicitly disables presence leave events.
        * OPTIONAL
        *
        * @attribute noleave
        * @type boolean
        * @default false
        */
      noleave: false,

      /**
        * The 'keepalive' attribute sets the interval betwween keepalive pings.
        * OPTIONAL
        *
        * @attribute keepalive 
        * @type number
        * @default 60
        */
      keepalive: 60,

      /**
        * The 'secret_key' attribute sets the secret_key used only to sign Access Manager API messages.
        * OPTIONAL
        *
        * @attribute secret_key
        * @type string
        * @default ''
        */
      secret_key: '',

      /**
        * The 'ssl' attribute, when set to true, enables transport layer encryption with SSL/TLS. 
        * OPTIONAL
        *
        * @attribute ssl 
        * @type boolean
        * @default false
        */
      ssl: false,

      /**
        * The 'windowing' sets the time interval in milliseconds that PubNub will use to optimize message delivery by bundling them into a single compressed payload.
        * OPTIONAL
        *
        * @attribute windowing
        * @type number
        * @default 10
        */
      windowing: 10,

      /**
       * The `jsonp` attribute, when set to true, explicitly enforces JSON(P) as the data transport method.
       * OPTIONAL 
       *
       * @attribute jsonp
       * @type boolean
       * @default false
       */
      jsonp: false,
      

      ready: function() {
          var settings = {
            publish_key: this.publish_key,
            subscribe_key: this.subscribe_key,
            auth_key: this.auth_key || undefined,
            uuid: this.uuid || undefined,
            cipher_key: this.cipher_key || undefined,
            noleave: this.noleave || undefined,
            keepalive: this.keepalive || undefined,
            secret_key: this.secret_key || undefined,
            ssl: this.ssl || undefined,
            windowing: this.windowing || undefined,
            jsonp: this.jsonp || undefined
          }
          console.log(JSON.stringify(settings));
          // this.pubnub = PUBNUB.init(settings);
          window.pubnub = PUBNUB.init(settings);
          console.log("WASSUP");
      },

      /**
       * The `sayHello` method will return a greeting.
       * 
       * @method sayHello
       * @param {String} greeting Pass in a specific greeting.
       * @return {String} Returns a string greeting.
       */
      sayHello: function(greeting) {
        var response = greeting || 'Hello World!';
        return 'seed-element says, ' + response;
      },

      /**
       * The `seed-element-lasers-success` event is fired whenever we
       * call fireLasers.
       * 
       * @event seed-element-lasers-success
       * @param {Object} detail
       *   @param {string} detail.sound An amazing sound.
       */

      /**
       * The `fireLasers` method will fire the lasers. At least
       * it will dispatch an event that claims lasers were fired :)
       * 
       * @method fireLasers
       */
      fireLasers: function() {
        this.fire('seed-element-lasers-success', { sound: 'Pew pew pew!' });
      }

    });

  </script>

  <template>
    <span> HELLO </span>
    <content></content>
  </template>
</polymer-element>
