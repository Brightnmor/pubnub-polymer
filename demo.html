<!doctype html>
<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <title>pubnub-element Demo/Testing</title>

  <script src="../platform/platform.js"></script>
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
  <link rel="import" href="pubnub-element.html">
  <link rel="import" href="demo-element.html"> 
</head>
<body >
  <core-pubnub publish_key="demo" subscribe_key="demo" id="core" uuid="hi">
    <core-pubnub-subscribe channel="pubnubPolymerDemo" id="sub"> 
      <core-pubnub-publish channel="pubnubPolymerDemo" id="pub" message="first">
        <core-pubnub-publish channel="pubnubPolymerDemo" id="pub" message="second">
        </core-pubnub-publish>
      </core-pubnub-publish>
    </core-pubnub-subscribe>
  </core-pubnub>
<div class="container">
<h1>PubNub Polymer Demo</h1><hr>
<div class="row">
    <div class="col-md-8">
      <h2> <a href="./#core-pubnub-subscribe">&lt;core-pubnub-subscribe&gt; </a> </h2>
    <div class="col-md-6">
      <h2>Messages</h2>
      <list-data heading="Received Messages" id="msgsList"></list-data>
    </div>
    <div class="col-md-6">
      <h2>Presence</h2>
      <list-data heading="Presence Messages" id="presList"></list-data>
    </div>
  </div>
    <div class="col-md-4">
      <h2> <a href="./#core-pubnub-publish" >&lt;core-pubnub-publish&gt; </a> </h2>
    </div>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-4">History</div>
    <div class="col-md-4">Here Now</div>
    <div class="col-md-4">Where Now</div>
</div>

<script>
$("#sub")[0].addEventListener('callback', function(e) {
    $("#msgsList")[0].data = $("#sub")[0].messages;
});
$("#sub")[0].addEventListener('presence', function(e) {
    $("#presList")[0].data = $("#sub")[0].presence.map(function(j) {return JSON.stringify(j, null, 2)});
});
</script>
</body>
</html>
